<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Карта — кликабельные локации</title>

<!-- Базовая карта и версии с подсветкой -->
<link rel="preload" as="image" href="1.jpg">
<link rel="preload" as="image" href="2.jpg">
<link rel="preload" as="image" href="3.jpg">
<link rel="preload" as="image" href="4.jpg">
<link rel="preload" as="image" href="5.jpg">
<link rel="preload" as="image" href="6.jpg">
<link rel="preload" as="image" href="7.jpg">
<link rel="preload" as="image" href="8.jpg">

<style>
  :root { --swap-delay: 700ms; } /* задержка перед открытием ссылки */
  body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#0e2230; }
  .wrap { max-width: 768px; margin: 0 auto; padding: 16px; }
  .card { background:#fff; border-radius:16px; box-shadow: 0 10px 30px rgba(0,0,0,.15); overflow:hidden; }
  .map { display:block; width:100%; height:auto; }

  /* Кликабельные зоны */
  .hotspot { cursor:pointer; pointer-events: all; fill: rgba(255,165,0,0); } /* прозрачная заливка нужна, чтобы зона кликалась */
  .hotspot:hover { fill: rgba(255,165,0,.18); transition: fill .15s; }       /* можно убрать подсветку, если не нужна */

  /* Модалка для лагерей */
  .modal[hidden] { display:none; }
  .modal { position:fixed; inset:0; background:rgba(0,0,0,.6); display:grid; place-items:center; z-index:20; }
  .modal__box { background:#fff; max-width:560px; margin:16px; padding:24px; border-radius:16px; text-align:center; }
  .btn { appearance:none; border:0; border-radius:12px; padding:12px 18px; font-weight:600; cursor:pointer; background:#0ea5e9; color:#fff; }
  .btn:active { transform: translateY(1px); }
  .hint { color:#94a3b8; font-size:12px; text-align:center; margin-top:8px; }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <!-- Вся логика построена на одном SVG: картинка + прозрачные кликабельные круги -->
    <!-- ВНИМАНИЕ К РАЗМЕРАМ: viewBox подобран под изображение 768×1152 (портрет).
         Если ваша 1.jpg другого размера, замените на его точные размеры в viewBox="0 0 ШИРИНА ВЫСОТА"
         и подкорректируйте координаты cx/cy/r ниже. -->
    <svg id="islandSvg" class="map" viewBox="0 0 768 1152" preserveAspectRatio="xMidYMid meet">
      <!-- Базовое изображение карты -->
      <image id="mapImg" href="1.jpg" width="768" height="1152" />

      <!-- ЗОНЫ (примерно выставлены по картинке; подправьте cx/cy/r под ваш файл) -->
      <!-- Скала пропитания (8.jpg) -->
      <circle class="hotspot"
              cx="384" cy="160" r="90"
              data-name="Скала пропитания"
              data-image="8.jpg"
              data-link="#"
              >
        <title>Скала пропитания</title>
      </circle>

      <!-- Плато азарта (7.jpg) -->
      <circle class="hotspot"
              cx="600" cy="420" r="90"
              data-name="Плато азарта"
              data-image="7.jpg"
              data-link="#"
              >
        <title>Плато азарта</title>
      </circle>

      <!-- Бухта тренировок (5.jpg) -->
      <circle class="hotspot"
              cx="165" cy="450" r="92"
              data-name="Бухта тренировок"
              data-image="5.jpg"
              data-link="#"
              >
        <title>Бухта тренировок</title>
      </circle>

      <!-- Зона прибытия (2.jpg) -->
      <circle class="hotspot"
              cx="160" cy="940" r="95"
              data-name="Зона прибытия"
              data-image="2.jpg"
              data-link="#"
              >
        <title>Зона прибытия</title>
      </circle>

      <!-- Устье разума (6.jpg) -->
      <circle class="hotspot"
              cx="390" cy="420" r="78"
              data-name="Устье разума"
              data-image="6.jpg"
              data-link="#"
              >
        <title>Устье разума</title>
      </circle>

      <!-- Совет племени (4.jpg) -->
      <circle class="hotspot"
              cx="385" cy="610" r="90"
              data-name="Совет племени"
              data-image="4.jpg"
              data-link="#"
              >
        <title>Совет племени</title>
      </circle>

      <!-- Лес вдохновения (3.jpg) -->
      <circle class="hotspot"
              cx="650" cy="690" r="95"
              data-name="Лес вдохновения"
              data-image="3.jpg"
              data-link="#"
              >
        <title>Лес вдохновения</title>
      </circle>

      <!-- Лагерь красных — всплывающее сообщение -->
      <circle class="hotspot"
              cx="215" cy="790" r="95"
              data-name="Лагерь красных"
              data-image="1.jpg"            <!-- показываем базовую карту -->
              data-message="Тут будет сообщение для ЛАГЕРЯ КРАСНЫХ (замените текст позже)."
              >
        <title>Лагерь красных</title>
      </circle>

      <!-- Лагерь жёлтых — всплывающее сообщение -->
      <circle class="hotspot"
              cx="640" cy="900" r="95"
              data-name="Лагерь жёлтых"
              data-image="1.jpg"
              data-message="Тут будет сообщение для ЛАГЕРЯ ЖЁЛТЫХ (замените текст позже)."
              >
        <title>Лагерь жёлтых</title>
      </circle>
    </svg>

    <div class="hint">Подсветка при наведении включена для удобной отладки зон. Можно убрать в CSS (.hotspot:hover).</div>
  </div>
</div>

<!-- Модалка для лагерей -->
<div id="modal" class="modal" hidden>
  <div class="modal__box">
    <div id="modalText" style="margin-bottom:16px; font-size:18px; line-height:1.4;">
      Сообщение…
    </div>
    <button class="btn" id="modalClose">Понятно</button>
  </div>
</div>

<script>
  const imgEl = document.getElementById('mapImg');
  const zones  = document.querySelectorAll('.hotspot');
  const modal  = document.getElementById('modal');
  const modalText = document.getElementById('modalText');
  const modalClose = document.getElementById('modalClose');

  // Небольшой предзагрузчик (на случай, если <link rel="preload"> не сработал)
  (function preload(srcs){
    srcs.forEach(s => { const i = new Image(); i.src = s; });
  })(['2.jpg','3.jpg','4.jpg','5.jpg','6.jpg','7.jpg','8.jpg']);

  let busy = false; // защита от двойных кликов

  zones.forEach(z => {
    z.addEventListener('click', () => {
      if (busy) return;
      busy = true;

      const swap  = z.dataset.image || '1.jpg';
      const link  = z.dataset.link  || '';
      const msg   = z.dataset.message;

      // Меняем картинку (индикатор места)
      imgEl.setAttribute('href', swap);

      // Если есть сообщение (для лагерей) — показываем модалку и не уходим по ссылке
      if (msg) {
        setTimeout(() => { // лёгкая пауза, чтобы пользователь успел увидеть индикатор
          modalText.textContent = msg;
          modal.hidden = false;
          // Вернуть базовую карту при закрытии модалки
        }, 250);
        return;
      }

      // Открыть ссылку (если задана) с небольшой задержкой, чтобы был виден индикатор
      const hasRealLink = link && link !== '#';
      if (hasRealLink) {
        setTimeout(() => { window.location.href = link; }, 700);
      } else {
        // Если ссылки пока нет — просто вернёмся к базовой карте через секунду
        setTimeout(() => { imgEl.setAttribute('href', '1.jpg'); busy = false; }, 1000);
      }
    });
  });

  // Закрытие модалки
  function closeModal() {
    modal.hidden = true;
    imgEl.setAttribute('href', '1.jpg'); // вернуть базовую карту
    busy = false;
  }
  modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
  modalClose.addEventListener('click', closeModal);
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && !modal.hidden) closeModal(); });

  // Подсказка: чтобы назначить ссылку, просто впишите её в data-link у нужной зоны:
  // пример: data-link="https://example.com/page"
</script>
</body>
</html>
